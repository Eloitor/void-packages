# Template file for 'jpexs-decompiler'
pkgname=jpexs-decompiler
version=18.4.1
revision=1
hostmakedepends="apache-ant openjdk17"
depends="virtual?java-runtime"
short_desc="Flash Decompiler"
maintainer="Eloi Torrents <eloitor@disroot.org>"
license="GPL-3.0-or-later"
homepage="https://github.com/jindrapetrik/jpexs-decompiler"
changelog="https://raw.githubusercontent.com/jindrapetrik/jpexs-decompiler/master/CHANGELOG.md"
distfiles="https://github.com/jindrapetrik/jpexs-decompiler/archive/refs/tags/version${version}.tar.gz"
checksum=916887e87cd2c27321bd7d1faf0d0ab860615b6436dd6df075f72526138bcc3c

do_build() {
	export JAVA_HOME=/usr/lib/jvm/openjdk17
	ant build
}

do_install() {
	for file in $(ls dist/lib); do
		vinstall dist/lib/$file 644 /usr/share/java/ffdec/lib
	done
	vinstall dist/flashlib/airglobal.swc 644 /usr/share/java/ffdec/flashlib
	vinstall dist/flashlib/playerglobal32_0.swc 644 /usr/share/java/ffdec/flashlib
	vinstall dist/icon.ico 644 /usr/share/java/ffdec
	vinstall dist/icon.png 644 /usr/share/java/ffdec
	vinstall dist/ffdec.jar 644 /usr/share/java/ffdec
	vbin dist/ffdec.sh
}
