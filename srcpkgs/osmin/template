# Template file for 'osmin'
pkgname=osmin
version=1.11.1
revision=1
_libosmscout_version=2023.03.30.1
build_style=cmake
cmake_builddir="${pkgname}-${version}"
configure_args="-DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++ ."
hostmakedepends="qt5-qmake pkg-config qt5-host-tools git"
makedepends="marisa-devel libxml2-devel qt5-declarative-devel qt5-3d clang libgomp-devel
 libomp-devel qt5-declarative-devel qt5-tools-devel
 qt5-svg-devel   qt5-quickcontrols2-devel qt5-sensors-devel
 qt5-multimedia-devel qt5-remoteobjects-devel qt5-location-devel"
short_desc="GPS Navigator On-Road/Off-Road"

archs="~armv6l-musl ~armv7l ~i686" # libomp-devel
license="GPL-3.0-only"
maintainer="Eloi Torrents <eloitor@duck.com>"
homepage="https://github.com/janbar/osmin"
distfiles="
 https://github.com/janbar/osmin/archive/refs/tags/${version}.tar.gz
 https://github.com/Framstag/libosmscout/archive/refs/tags/v${_libosmscout_version}.tar.gz"
checksum="5a501291ff1b2cfdfa0d974db4ae876e24fe5e1c93802c83c1743860ef721f94
 b51dc4ecbced421ed9db6359567be030c77f781b0da09830c0f2b06f675d004d"

# nopie_files="/usr/bin/osmin"

pre_configure() {
	cd ${pkgname}-${version}
	rmdir -v backend/libosmscout
	mv -v ../libosmscout-${_libosmscout_version} backend/libosmscout
}
