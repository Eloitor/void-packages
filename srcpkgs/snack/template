# Template file for 'snack'
pkgname=snack
version=2.2.10
revision=1
build_style=gnu-configure
build_wrksrc=unix
configure_args="--enable-alsa --with-tcl=/usr/lib/ --with-tk=/usr/lib --with-ogg-include=/usr/lib --with-ogg-lib=/usr/lib"
makedepends="tcl-devel tk-devel vorbis-tools libvorbis-devel alsa-lib-devel"
short_desc="Sound toolkit for scripting languages (Tcl, Python, Ruby, ...)"
maintainer="Eloi Torrents <eloitor@disroot.org>"
license="GPL-2.0-only"
homepage="https://www.speech.kth.se/snack/"
distfiles="https://web.archive.org/web/20230819212652/https://www.speech.kth.se/snack/dist/snack${version}.tar.gz"
checksum="4bfe764547ab92ba58f43b77366dbb7c7b3512d65a27cdbf9e585a9cb64ce81e"

post_extract() {
	# Minor code corrections, missing include.
	sed -i '/#include <stdlib.h>/a #include <math.h>' ${wrksrc}/generic/jkFormatMP3.c
}
