# Template file for 'tcl-pdfviewer'
pkgname=tcl-pdfviewer
version=0.9.1
revision=1
makedepends=""
depends="tclMuPDF tklib"
short_desc="Tcl/Tk widget for browsing PDF files."
maintainer="Eloi Torrents <eloitor@disroot.org>"
license="GPL-3.0-or-later"
homepage="https://wiki.tcl-lang.org/page/pdfviewer"
#changelog=""
distfiles="https://sourceforge.net/projects/irrational-numbers/files/pdfviewer/pdfviewer-${version}.zip"
checksum=787b8f0bc2ccc0e208795eee784c8ff93757d7dd787c46ae8d30901bcb58fec8

do_patch() {
	sed -i '/package ifneeded tooltip/,/}} $dir ]/d' lib/pkgIndex.tcl
}

do_install() {
	vinstall pkgIndex.tcl 644 usr/lib/tcl8.6/pdfviewer
	vinstall pdfviewer.tcl 644 usr/lib/tcl8.6/pdfviewer
	vinstall lib/pkgIndex.tcl 644 usr/lib/tcl8.6/pdfviewer/lib
	vinstall lib/zbuttoncolor-0.0.tm 644 usr/lib/tcl8.6/pdfviewer/lib
	vinstall lib/zentry-0.0.tm 644 usr/lib/tcl8.6/pdfviewer/lib
	vinstall lib/zpalette-0.0.tm 644 usr/lib/tcl8.6/pdfviewer/lib
	vcopy images usr/lib/tcl8.6/pdfviewer
	
}

post_install() {
	vlicense license.terms
}
